<!DOCTYPE html>
<html>

<head>
<meta charset="UTF-8">
<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
<title>Post Trollify Industry </title>
<!-- Favicon-->
<link rel="icon" href="../../favicon.ico" type="image/x-icon">

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css?family=Roboto:400,700&subset=latin,cyrillic-ext" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" type="text/css">

<!-- Bootstrap Core Css -->
<link href="../../plugins/bootstrap/css/bootstrap.css" rel="stylesheet">

<!-- Waves Effect Css -->
<link href="../../plugins/node-waves/waves.css" rel="stylesheet" />

<!-- Animation Css -->
<link href="../../plugins/animate-css/animate.css" rel="stylesheet" />

<!-- Custom Css -->
<link href="../../css/style.css" rel="stylesheet">

<!-- AdminBSB Themes. You can choose a theme from css/themes instead of get all themes -->
<link href="../../css/themes/all-themes.css" rel="stylesheet" />
</head>

<body class="theme-red">
<!-- Page Loader -->
<div class="page-loader-wrapper">
<div class="loader">
<div class="preloader">
<div class="spinner-layer pl-red">
<div class="circle-clipper left">
<div class="circle"></div>
</div>
<div class="circle-clipper right">
<div class="circle"></div>
</div>
</div>
</div>
<p>Trollify Industry</p>
</div>
</div>
<!-- #END# Page Loader -->
<!-- Overlay For Sidebars -->
<div class="overlay"></div>
<!-- #END# Overlay For Sidebars -->
<!-- Search Bar -->
<div class="search-bar">
<div class="search-icon">
<i class="material-icons">search</i>
</div>
<input type="text" placeholder="START TYPING...">
<div class="close-search">
<i class="material-icons">close</i>
</div>
</div>
<!-- #END# Search Bar -->
<!-- Top Bar -->
<nav class="navbar">
<div class="container-fluid">
<div class="navbar-header">
<a href="javascript:void(0);" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false"></a>
<a href="javascript:void(0);" class="bars"></a>
<a class="navbar-brand" href="#">BDPS GUMGAON</a>
</div>
<div class="collapse navbar-collapse" id="navbar-collapse">
<ul class="nav navbar-nav navbar-right">
<!-- Call Search -->
<li><a href="javascript:void(0);" class="js-search" data-close="true"><i class="material-icons">search</i></a></li>
<!-- #END# Call Search -->
<!-- Notifications -->
<li class="dropdown">
<a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown" role="button">
<i class="material-icons">notifications</i>
<span class="label-count">7</span>
</a>
<ul class="dropdown-menu">
<li class="header">NOTIFICATIONS</li>
<li class="body">
<ul class="menu">
<li>
<a href="javascript:void(0);">
<div class="icon-circle bg-light-green">
<i class="material-icons">person_add</i>
</div>
<div class="menu-info">
<h4>Prem Janghela new bg add</h4>
<p>
<i class="material-icons">access_time</i> 2 days ago
</p>
</div>
</a>
</li>
<li>
<a href="javascript:void(0);">
<div class="icon-circle bg-cyan">
<i class="material-icons">add_shopping_cart</i>
</div>
<div class="menu-info">
<h4>Trollify Industry Active</h4>
<p>
<i class="material-icons">access_time</i> 22 mins ago
</p>
</div>
</a>
</li>
<li>
<a href="javascript:void(0);">
<div class="icon-circle bg-light-green">
<i class="material-icons">cached</i>
</div>
<div class="menu-info">
<h4><b>Prem Janghela</b> updated status</h4>
<p>
<i class="material-icons">access_time</i> 3 hours ago
</p>
</div>
</a>
</li>
<li>
<a href="javascript:void(0);">
<div class="icon-circle bg-purple">
<i class="material-icons">settings</i>
</div>
<div class="menu-info">
<h4>Settings updated</h4>
<p>
<i class="material-icons">access_time</i> Yesterday
</p>
</div>
</a>
</li>
</ul>
</li>
<li class="footer">
<a href="javascript:void(0);">View All Notifications</a>
</li>
</ul>
</li>
<!-- #END# Notifications -->
<!-- Tasks -->
<li class="dropdown">
<a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown" role="button">
<i class="material-icons">flag</i>
<span class="label-count">9</span>
</a>
<ul class="dropdown-menu">
<li class="header">TASKS</li>
<li class="body">
<ul class="menu tasks">
<li>
<a href="javascript:void(0);">
<h4>
Footer display issue
<small>32%</small>
</h4>
<div class="progress">
<div class="progress-bar bg-pink" role="progressbar" aria-valuenow="85" aria-valuemin="0" aria-valuemax="100" style="width: 32%">
</div>
</div>
</a>
</li>
</ul>
</li>
<li class="footer">
<a href="javascript:void(0);">View All Tasks</a>
</li>
</ul>
</li>
<!-- #END# Tasks -->
<li class="pull-right"><a href="javascript:void(0);" class="js-right-sidebar" data-close="true"><i class="material-icons">more_vert</i></a></li>
</ul>
</div>
</div>
</nav>
<!-- #Top Bar -->
<section>
<!-- Left Sidebar -->
<aside id="leftsidebar" class="sidebar">
<!-- User Info -->
<div class="user-info">
<div class="image">
<img src="../../images/user.png" width="48" height="48" alt="User" />
</div>
<div class="info-container">
<div class="name" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">BDPS SCHOOL</div>
<div class="email">bdpsschool04@gmail.com</div>
<div class="btn-group user-helper-dropdown">
<i class="material-icons" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">keyboard_arrow_down</i>
<ul class="dropdown-menu pull-right">
<li><a href="javascript:void(0);"><i class="material-icons">person</i>Edit Profile</a></li>
<li><a href="javascript:void(0);"><i class="material-icons">input</i>Sign Out</a></li>
</ul>
</div>
</div>
</div>
<!-- #User Info -->
       
<!-- Footer -->
<div class="legal">
<div class="copyright">
&copy; 2024 <a href="javascript:void(0);">Trollify Industry CEO - Prem Janghela</a>.
</div>
<div class="version">
<b>Version: </b> 1.0.5
</div>
</div>
<!-- #Footer -->
</aside>
<!-- #END# Left Sidebar -->

<!-- #END# Right Sidebar -->
</section>



       
       <section class="content">








   













     
  <input type="text" class="inp"  id="uniqueId" placeholder="Enter Unique ID">
   <input type="text" class="inp"  id="searchInput" oninput="filterCards()" placeholder="Search by Name">
 
   <button class="btn btn-default waves-effect" onclick="fetchData()"><i class="material-icons">search</i></button> <br><br>





                                

  
    <div class="sp" id="spinner"></div>
  <div id="card-container"  ></div>
  
      


<script>
    const localId = localStorage.getItem('uniqueId');
    document.getElementById('uniqueId').value = localId || '';

    async function fetchData() {
      const uniqueId = document.getElementById('uniqueId').value;
      if (!uniqueId) return;

      // Save unique ID in local storage
      localStorage.setItem('uniqueId', uniqueId);

      const url = "https://script.google.com/macros/s/AKfycbwp50vxIdpKu_agGMXOVH_8_BmbsWeCYgaYAGMikf8ZJvn0QAse7D0Y5tVsSQ9DZ58T/exec?id=" + uniqueId; // Replace with your URL
      showSpinner();

      const response = await fetch(url);
      const data = await response.json();

      hideSpinner();
      displayData(data.reverse()); // Show newest first
    }

    function showSpinner() {
      document.getElementById('spinner').style.display = 'block';
    }

    function hideSpinner() {
      document.getElementById('spinner').style.display = 'none';
    }

    function formatDate(dateString) {
      const date = new Date(dateString);
      const options = { day: '2-digit', month: 'short', year: '2-digit', hour: '2-digit', minute: '2-digit', hour12: true };
      return date.toLocaleString('en-GB', options).replace(',', '');
    }

    function displayData(data) {
      const container = document.getElementById('card-container');
      container.innerHTML = ''; // Clear previous data

      data.forEach(item => {
        const statusClass = item.status.toLowerCase() === 'fail' ? 'status-fail' : 
                            item.status.toLowerCase() === 'success' ? 'status-success' : '';

        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `

        <div class="cd2">
        <div class="panel panel-default panel-post">
        <div class="panel-heading">
        <div class="media">
        <small style="color:grey; font-weight:;" >${formatDate(item.date)}</small><i style="color:#fff" >............................</i> <small style="color:grey" >status : </small><small class="${statusClass}" style="font-weight:;"  >${item.status}</small>
        <div class="media-left">
        <a href="#">
        <!---<img class="profile-img" src="https://i.postimg.cc/YqvW2Ltq/20250130-134520.jpg" />-->
        <img class="profile-img" src="${item.photo}" />
        <i class="material-icons om">call_received</i>
        </a>
        </div>
        
        
        
        <div class="media-body">
        
        <h4 class="media-heading">
        
        <a href="#" style="color:#000">${item.name} </a><i class="method">${item.method}</i> <br> <i class="money"  >â‚¹${item.amount}</i>  <i class="paytype">${item.payType}</i> 
        <small> Note: ${item.note}</small><br>
        
        </h4>
        
        </div>
        </div>
        </div>
        
        </div>
        </div>

        
        `;
        container.appendChild(card);
      });
    }

    function filterCards() {
    const searchValue = document.getElementById('searchInput').value.toLowerCase();
    const cards = document.querySelectorAll('.card');
    cards.forEach(card => {
    const nameElement = card.querySelector('.media-heading a');
    const name = nameElement ? nameElement.textContent.toLowerCase() : '';
    card.style.display = name.includes(searchValue) ? 'block' : 'none';
    });
    }
    
    // Auto-fetch data if unique ID exists
    if (localId) fetchData();

    // Real-time updates every 10 seconds
    setInterval(() => {
      if (localId) fetchData();
    }, 10000);
  </script>

<style>
   .sp{
      position:fixed;



   }
   .inp{
   width:36%;
   
   }
   .method{
      font-style:normal;
      border:1px solid grey;
      border-radius:2px;
      font-size:10px;
      color:navy;
      padding:1px 1px;
    }
   .paytype{
      font-weight:bold;
      border:1px solid grey;
      color:navy;
      border-radius:4px;
      padding:1px 3px;
      position:absolute;
      font-size:8px;
      margin-left:190px;
      margin-top:15px;
   }
    .om{
       position:absolute;
       margin-left:-50px;
       display:none;
    }
   .line1{
      margin-left:10px;
   }
    body {
      font-family: 'Arial', sans-serif;
      background-color: #fff;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
    }



     .profile-img {
     border: 0.7px solid black;
     }
     
     
     #spinner {
     display: none;
     margin: 20px auto;
     border: 4px solid #f3f3f3;
     border-top: 4px solid #3498db;
     border-radius: 50%;
     width: 30px;
     height: 30px;
     animation: spin 1s linear infinite;
     }
     @keyframes spin {
     0% { transform: rotate(0deg); }
     100% { transform: rotate(360deg); }
     }
     input, button {
     padding: 8px;
     margin: 1px 5px;
     }
     .status-fail {
     color: red;
     font-weight: bold;
     }
     .status-success {
     color: green;
     font-weight: bold;}
     
    .money{ font-size:18px;
          font-weight:bold; 
          position:absolute;  
          text-align:right; 
          margin-left:180px;
          margin-top:-15px;
          }
           
    .pm{text-align:riht;}
    
    .cd2{
      margin-top:;
      margin-bottom:-15px;
    }
  
  </style>


<style>

/* Footer Styles */
.footer {
position: fixed;
bottom: 0;
left: 0;
width: 100%;
background-color: #F14232;
color: white;
display: flex;
justify-content: space-around;
padding: 13px 0;
}

.footer a {
text-decoration: none;
color: white;
text-align: center;
font-size: 16px;
}

.footer a:hover {
color: #000;
}

.footer-icon {
display: flex;
flex-direction: column;
align-items: center;
}


/* Body Padding to Avoid Footer Overlap */
main {
padding-bottom: 60px;
text-align: center;
}
</style>


<!-- Footer -->
<div class="footer">

<a href="https://premjanghela.github.io/bdpsgumgaon/"><i class="material-icons">home</i></a> 

<a href="https://trollifyindustry.github.io/bdpsgumgaon/pages/examples/transaction.html" ><i class="material-icons">swap_vertical_circle</i></a>

<a href="https://trollifyindustry.github.io/bdpsgumgaon/pages/examples/post.html" ><i class="material-icons">add_circle </i></a>

<a href="https://trollifyindustry.github.io/bdpsgumgaon/pages/examples/404.html" ><i class="material-icons">devices_other</i></a>

<a href="https://trollifyindustry.github.io/bdpsgumgaon/pages/examples/editprofile.html" ><i class="material-icons">account_circle</i></a>

</div>
   
</body>
</html>
    <!-- Jquery Core Js -->
    <script src="../../plugins/jquery/jquery.min.js"></script>

    <!-- Bootstrap Core Js -->
    <script src="../../plugins/bootstrap/js/bootstrap.js"></script>

    <!-- Select Plugin Js -->
    <script src="../../plugins/bootstrap-select/js/bootstrap-select.js"></script>

    <!-- Slimscroll Plugin Js -->
    <script src="../../plugins/jquery-slimscroll/jquery.slimscroll.js"></script>

    <!-- Waves Effect Plugin Js -->
    <script src="../../plugins/node-waves/waves.js"></script>

    <!-- Custom Js -->
    <script src="../../js/admin.js"></script>
    <script src="../../js/pages/examples/profile.js"></script>

    <!-- Demo Js -->
    <script src="../../js/demo.js"></script>
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</body>

</html>



<!---
function doGet(e) {
  const ss = SpreadsheetApp.getActiveSpreadsheet();
  const sheet = ss.getSheetByName('Sheet4'); // Change the sheet name if necessary
  const uniqueId = e.parameter.id;
  const data = sheet.getDataRange().getValues();
  let result = [];

  for (let i = 1; i < data.length; i++) {
    if (data[i][0] == uniqueId) {
      result.push({
        name: data[i][1],
        amount: data[i][2],
        status: data[i][3],
        payType: data[i][4],
        method: data[i][5],
        note: data[i][6],
        date: data[i][7],
        photo: data[i][8]
      });
    }
  }

  return ContentService.createTextOutput(JSON.stringify(result))
    .setMimeType(ContentService.MimeType.JSON);
}


-->